(window.webpackJsonp=window.webpackJsonp||[]).push([[94,96,103],{"+G0P":function(n,t,o){"use strict";o.d(t,"a",(function(){return l}));class l{}},"26gb":function(n,t,o){"use strict";var l=o("8Y7J"),e=o("MKJQ"),i=o("sZkV"),s=o("SVse");o("RJ4+"),o("N5Ls"),o("bD4E"),o("iInd"),o("Rznk"),o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return p}));var a=l.nb({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]{padding:0 16px}ion-title[_ngcontent-%COMP%]{padding:0;text-transform:capitalize}"]],data:{}});function r(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,4,"ion-buttons",[["slot","start"]],null,null,null,e.M,e.e)),l.ob(1,49152,null,0,i.l,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(n,t,o){var e=!0;return"click"===t&&(e=!1!==l.Bb(n,4).onClick(o)&&e),e}),e.K,e.c)),l.ob(3,49152,null,0,i.g,[l.h,l.k,l.x],{defaultHref:[0,"defaultHref"]},null),l.ob(4,16384,null,0,i.h,[[2,i.fb],i.Fb],{defaultHref:[0,"defaultHref"]},null)],(function(n,t){var o=t.component;n(t,3,0,o.backPageLink),n(t,4,0,o.backPageLink)}),null)}function u(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,2,"ion-buttons",[["slot","start"]],null,null,null,e.M,e.e)),l.ob(1,49152,null,0,i.l,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,0,"img",[["alt","VIT logo"],["src","assets/images/VITLogo.png"],["title","VIT logo"],["width","150"]],null,null,null,null,null))],null,null)}function c(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,2,"ion-buttons",[["slot","end"]],null,null,null,e.M,e.e)),l.ob(1,49152,null,0,i.l,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,0,"img",[["alt","VIT logo"],["src","assets/images/VIT-logo.png"],["title","VIT logo"],["width","64"]],null,null,null,null,null))],null,null)}function g(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,2,"ion-buttons",[["slot","end"]],null,null,null,e.M,e.e)),l.ob(1,49152,null,0,i.l,[l.h,l.k,l.x],null,null),(n()(),l.Jb(2,0,["Logged As: ",""]))],null,(function(n,t){n(t,2,0,t.component.serviceRole)}))}function p(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,14,"ion-header",[],null,null,null,e.T,e.l)),l.ob(1,49152,null,0,i.B,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,12,"ion-toolbar",[],null,null,null,e.pb,e.H)),l.ob(3,49152,null,0,i.zb,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,2,"ion-title",[],null,null,null,e.nb,e.F)),l.ob(5,49152,null,0,i.xb,[l.h,l.k,l.x],null,null),(n()(),l.Jb(6,0,[" "," "])),(n()(),l.eb(16777216,null,0,1,null,r)),l.ob(8,16384,null,0,s.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.eb(16777216,null,0,1,null,u)),l.ob(10,16384,null,0,s.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.eb(16777216,null,0,1,null,c)),l.ob(12,16384,null,0,s.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.eb(16777216,null,0,1,null,g)),l.ob(14,16384,null,0,s.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null)],(function(n,t){var o=t.component;n(t,8,0,o.isBackButtonActivate),n(t,10,0,o.isFullLogoActivate),n(t,12,0,o.isSmallLogoActivate),n(t,14,0,o.isLoggedAsActivate)}),(function(n,t){n(t,6,0,t.component.title)}))}},AYHm:function(n,t,o){"use strict";o.r(t);var l=o("8Y7J");class e{}var i=o("pMnS"),s=o("26gb"),a=o("RJ4+"),r=o("N5Ls"),u=o("bD4E"),c=o("iInd"),g=o("Rznk"),p=o("MKJQ"),h=o("sZkV"),d=o("bl9C"),m=o("4zgz"),b=o("s4HV"),f=o("gTw3"),P=o("+BTu");class v{constructor(n,t,o,e,i,s){this.commonPopover=n,this.androidPermissions=t,this.geolocation=o,this.locationAccuracy=e,this.platform=i,this.userService=s,this.defaultLat=28.6304,this.defaultLng=77.2177,this.getLatLng=new l.m,this.option={skip:"",limit:"",keyword:"",sort:"",order:""},this.showGeoLocationIcon=!1}ngOnInit(){}ngAfterViewInit(){this.platform.ready().then(()=>{this.initMap()})}initMap(){let n={center:new google.maps.LatLng(this.defaultLat,this.defaultLng),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,myLocationButton:!0};this.map=new google.maps.Map(this.gmapElement.nativeElement,n),this.marker=new google.maps.Marker({position:new google.maps.LatLng(this.defaultLat,this.defaultLng),map:this.map}),this.platform.is("cordova")?this.checkGPSPermission():this.getCurrentPosition(),this.infoWindow=new google.maps.InfoWindow}addMarker(n){this.marker&&this.marker.setMap&&this.marker.setMap(null),this.marker=new google.maps.Marker({position:n,map:this.map})}getCurrentPosition(){navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{this.showPosition(n.coords.latitude,n.coords.longitude)},n=>{console.log(n),this.commonPopover.toastPopOver(n)},{enableHighAccuracy:!0}):console.log("Geolocation is not supported by this browser.")}showPosition(n,t){let o=new google.maps.LatLng(n,t);this.map.panTo(o),this.addMarker(o),this.getPosition(n,t),this.nearbySearch(n,t,[d.a.googleMaps.places.HOSPITAL]),this.textSearch(n,t,d.a.googleMaps.places.MARKET),this.fetchUser()}searchAddress(){this.searchBox.addListener("place_changed",()=>{let n=this.searchBox.getPlace();if(null==n.geometry)return;this.lat=n.geometry.location.lat(),this.lng=n.geometry.location.lng();let t=new google.maps.LatLng(this.lat,this.lng);this.map.panTo(t),this.addMarker(t),this.getPosition(this.lat,this.lng)})}getPosition(n,t){this.getLatLng.emit({lat:n,lng:t})}nearbySearch(n,t,o){let l={lat:n,lng:t},e=new google.maps.places.PlacesService(this.map),i=this;e.nearbySearch({location:l,radius:d.a.googleMaps.radius,types:o},(function(n,t,o){"OK"===t&&i.createMarkers(n)}))}textSearch(n,t,o){let l={lat:n,lng:t},e=this;new google.maps.places.PlacesService(this.map).textSearch({location:l,radius:d.a.googleMaps.radius,query:o},(function(n,t,o){"OK"===t&&e.createMarkers(n)}))}createMarkers(n){let t=new google.maps.LatLngBounds;for(let o,l=0;o=n[l];l++){let n={url:o.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},l=o.name,e=o.formatted_address||o.vicinity;this.placeMarker(l,e,`https://maps.google.com/?q=${l},${e}`,n,o.geometry.location),t.extend(o.geometry.location)}this.map.fitBounds(t)}checkGPSPermission(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(n=>{n.hasPermission?this.askToTurnOnGPS():this.requestGPSPermission()},n=>{this.commonPopover.toastPopOver(n),console.log(n)})}requestGPSPermission(){this.locationAccuracy.canRequest().then(n=>{n?console.log("4"):this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.askToTurnOnGPS()},n=>{this.commonPopover.toastPopOver(n),console.log(n)})})}askToTurnOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{this.getLocationCoordinates()},n=>{this.commonPopover.toastPopOver(n),console.log(n)})}getLocationCoordinates(){this.geolocation.getCurrentPosition().then(n=>{this.showPosition(n.coords.latitude,n.coords.longitude)}).catch(n=>{this.commonPopover.toastPopOver(n),console.log(n)})}fetchUser(){this.userService.getUserWihtinRadius(this.option).then(n=>{this.createMarkersUser(n.items)}).catch(n=>{console.log(n)})}createMarkersUser(n){let t=new google.maps.LatLngBounds;for(let o,l=0;o=n[l];l++){let n={url:"assets/images/VIT-logo.png",size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(50,50)},l=o.name||"CovitUser",e=o.address.formattedAddress,i=`https://maps.google.com/?q=${e}`,s=new google.maps.LatLng(o.address.lat,o.address.lng);this.placeMarker(l,e,i,n,s),t.extend(s)}this.map.fitBounds(t)}placeMarker(n,t,o,l,e){let i='<div id="content"><div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">'+n+'</h1><div id="bodyContent"><p>'+t+"</p><div class='view-link'><a target='_blank' href='"+o+"'><span>View On Map</span></a></div>",s=new google.maps.Marker({map:this.map,icon:l,title:n,position:e});google.maps.event.addListener(s,"click",n=>{this.infoWindow.setContent(i),this.infoWindow.open(this.map,s)})}}var k=l.nb({encapsulation:0,styles:[[".maps[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{width:calc(100% - 260px);top:10px!important}.maps[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;height:28px;padding:5px}.maps[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{border-radius:50%;background:#fff;width:40px;height:40px;right:12px!important;top:calc(100% - 230px)!important;display:none}.maps[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   .location-btn[_ngcontent-%COMP%]{width:100%;padding:0;min-width:0;height:40px;border-radius:50%;background:#fff}.maps[_ngcontent-%COMP%]   .geolocation-activated[_ngcontent-%COMP%]{display:block}.maps[_ngcontent-%COMP%]   .gmap[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 5em - 64px)}"]],data:{}});function L(n){return l.Lb(0,[l.Hb(671088640,1,{gmapElement:0}),(n()(),l.pb(1,0,null,null,1,"div",[["class","maps"]],null,null,null,null,null)),(n()(),l.pb(2,0,[[1,0],["gmap",1]],null,0,"div",[["class","gmap"]],null,null,null,null,null))],null,null)}class M{constructor(n,t,o){this.keystore=n,this.router=t,this.commonPopover=o,this.title="Map"}ngOnInit(){this.checkIfRoleSelected()}checkIfRoleSelected(){this.keystore.get("User").then(n=>{n.serviceRole===d.a.enums.roles.SERVICE_TAKER&&this.commonPopover.toastPopOver("False alarm is legally punishable!")})}}var w=l.nb({encapsulation:0,styles:[[""]],data:{}});function S(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,1,"app-common-header",[["isFullLogoActivate","true"],["isLoggedAsActivate","true"]],null,null,null,s.b,s.a)),l.ob(1,114688,null,0,a.a,[r.a,u.a,c.m,g.a],{isFullLogoActivate:[0,"isFullLogoActivate"],isLoggedAsActivate:[1,"isLoggedAsActivate"]},null),(n()(),l.pb(2,0,null,null,3,"ion-content",[["class","ion-padding"],["fullscreen",""]],null,null,null,p.Q,p.i)),l.ob(3,49152,null,0,h.u,[l.h,l.k,l.x],{fullscreen:[0,"fullscreen"]},null),(n()(),l.pb(4,0,null,0,1,"app-google-maps",[],null,null,null,L,k)),l.ob(5,4308992,null,0,v,[u.a,m.a,f.a,b.a,h.Hb,P.a],null,null)],(function(n,t){n(t,1,0,"true","true"),n(t,3,0,""),n(t,5,0)}),null)}function O(n){return l.Lb(0,[(n()(),l.pb(0,0,null,null,1,"app-map",[],null,null,null,S,w)),l.ob(1,114688,null,0,M,[g.a,c.m,u.a],null,null)],(function(n,t){n(t,1,0)}),null)}var I=l.lb("app-map",M,O,{},{},[]),C=o("SVse"),y=o("s7LF");class z{}var A=o("QhV3"),x=o("+G0P"),R=o("j1ZV");o.d(t,"MapPageModuleNgFactory",(function(){return T}));var T=l.mb(e,[],(function(n){return l.yb([l.zb(512,l.j,l.X,[[8,[i.a,I]],[3,l.j],l.v]),l.zb(4608,C.l,C.k,[l.s,[2,C.t]]),l.zb(4608,y.q,y.q,[]),l.zb(4608,h.b,h.b,[l.x,l.g]),l.zb(4608,h.Eb,h.Eb,[h.b,l.j,l.p]),l.zb(4608,h.Ib,h.Ib,[h.b,l.j,l.p]),l.zb(4608,y.b,y.b,[]),l.zb(5120,l.d,(function(n,t,o){return[h.Pb(n,t,o)]}),[h.Ob,C.c,l.x]),l.zb(1073742336,C.b,C.b,[]),l.zb(1073742336,y.p,y.p,[]),l.zb(1073742336,y.f,y.f,[]),l.zb(1073742336,h.Bb,h.Bb,[]),l.zb(1073742336,c.p,c.p,[[2,c.u],[2,c.m]]),l.zb(1073742336,z,z,[]),l.zb(1073742336,A.a,A.a,[]),l.zb(1073742336,y.m,y.m,[]),l.zb(1073742336,x.a,x.a,[]),l.zb(1073742336,R.a,R.a,[]),l.zb(1073742336,e,e,[]),l.zb(1024,c.k,(function(){return[[{path:"",component:M}]]}),[]),l.zb(256,h.Ob,void 0,[])])}))},QhV3:function(n,t,o){"use strict";o.d(t,"a",(function(){return l}));class l{}},"RJ4+":function(n,t,o){"use strict";o.d(t,"a",(function(){return i}));var l=o("mrSG"),e=(o("N5Ls"),o("bD4E"),o("Rznk"),o("bl9C"));class i{constructor(n,t,o,l){this.loginService=n,this.commonPopover=t,this.router=o,this.keystore=l}ngOnInit(){this.keystore.get("User").then(n=>{this.serviceRole=n.serviceRole===e.a.enums.roles.SERVICE_PROVIDER?e.a.enums.rolesValue.VOLUNTEER:e.a.enums.rolesValue.DISTRESSED})}goToLogout(){this.commonPopover.alertPopOver("Do you really want to logout?","Logout confirmation").then(n=>{n&&this.logout()})}logout(){return l.a(this,void 0,void 0,(function*(){yield this.commonPopover.loaderPresent("Logging Out..."),this.loginService.logout().then(n=>{this.router.navigate(["/login"]),this.commonPopover.toastPopOver("Successfully logged out"),this.commonPopover.loaderDismiss()})}))}}},j1ZV:function(n,t,o){"use strict";o.d(t,"a",(function(){return l}));class l{}}}]);