(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{NPGn:function(e,s,t){"use strict";t.r(s);var i=t("8Y7J");class o{}var n=t("pMnS"),l=t("26gb"),r=t("RJ4+"),c=t("N5Ls"),a=t("bD4E"),h=t("iInd"),u=t("Rznk"),d=t("MKJQ"),p=t("sZkV"),b=t("Wh3k"),f=t("VrDm"),m=t("s7LF"),k=t("+BTu"),v=t("Qcnj"),L=t("qJdp"),g=t("mrSG"),x=t("LvDl"),C=t.n(x),R=t("bl9C");class I{constructor(e,s,t,i,o){this.formBuilder=e,this.userService=s,this.networkConnection=t,this.commonPopover=i,this.keystore=o,this.tempArray=new Array(8),this.title="Profile",this.checkBoxList=[{value:"food",name:"Food",isChecked:!1},{value:"clothing",name:"Clothing",isChecked:!1},{value:"shelter",name:"Shelter",isChecked:!1},{value:"medical",name:"Medical",isChecked:!1}],this.selectedList=[],this.isAllSelected=!1,this.isLoading=!1}ngOnInit(){this.fetchUserInfo()}fetchUserInfo(){this.isLoading=!0,this.userService.getUser().then(e=>{this.isLoading=!1,this.userInfo=e,this.selectedList=e.supportList,this.userInfo.serviceRole===R.a.enums.roles.SERVICE_TAKER&&(this.selectedRadio=this.userInfo.supportList[0]),C.a.map(this.selectedList,e=>{let s=C.a.findIndex(this.checkBoxList,s=>s.value===e);s>-1&&(this.checkBoxList[s].isChecked=!0)}),this.checkBoxList.length==this.selectedList.length&&(this.isAllSelected=!0,this.masterCheck=!0),this.userForm=this.formBuilder.group({name:[e.name||"",[m.o.required]],countryCode:[e.countryCode||"",[m.o.required,m.o.pattern(/^[0-9]{1,3}$/)]],phone:[e.phone||"",[m.o.required,m.o.pattern(/^[0-9]{10,15}$/)]],profession:[e.profession||"",[m.o.required]],address:[e.address||""],serviceRole:[e.serviceRole||"",[m.o.required]],supportList:[e.supportList||""],isServiceRoleSelected:[e.isServiceRoleSelected||"",[m.o.required]]}),this.userInfo.serviceRole===R.a.enums.roles.SERVICE_TAKER&&(this.userForm.get("profession").clearValidators(),this.userForm.get("profession").updateValueAndValidity())}).catch(e=>{this.isLoading=!1})}checkMaster(e){setTimeout(()=>{this.checkBoxList.forEach(e=>{e.isChecked=this.masterCheck})})}checkEvent(){const e=this.checkBoxList.length;let s=0;this.checkBoxList.map(e=>{e.isChecked&&s++}),s>0&&s<e?(this.isIndeterminate=!0,this.masterCheck=!1):s==e?(this.masterCheck=!0,this.isIndeterminate=!1):(this.isIndeterminate=!1,this.masterCheck=!1)}selectItem(e){if("all"===e)if(this.isAllSelected){this.selectedList=[];for(let e of this.checkBoxList)e.isChecked=!1;this.isAllSelected=!1}else{this.selectedList=C.a.map(this.checkBoxList,"value");for(let e of this.checkBoxList)e.isChecked=!0;this.isAllSelected=!0}else{let s=C.a.indexOf(this.selectedList,e.value);if(s>-1){this.selectedList.splice(s,1);let t=C.a.findIndex(this.checkBoxList,s=>s.value===e.value);this.checkBoxList[t].isChecked=!1,this.isAllSelected=!1}else{this.selectedList.push(e.value);let s=C.a.findIndex(this.checkBoxList,s=>s.value===e.value);this.checkBoxList[s].isChecked=!0,this.checkBoxList.length==this.selectedList.length&&(this.isAllSelected=!0)}}}selectRadio(e){this.selectedRadio=e}saveUserInfo(){return g.a(this,void 0,void 0,(function*(){if(this.networkConnection.isOffline())return this.networkConnection.isConnectionMessage();if(!this.userForm.valid)return;let e=C.a.filter(this.checkBoxList,{isChecked:!0});e=C.a.map(e,"value");let s={name:this.userForm.controls.name.value,address:this.userForm.controls.address.value,supportList:this.userInfo.serviceRole===R.a.enums.roles.SERVICE_PROVIDER?e:[this.selectedRadio]};this.userInfo.serviceRole===R.a.enums.roles.SERVICE_PROVIDER&&(s.profession=this.userForm.controls.profession.value),yield this.commonPopover.loaderPresent("Updating user profile."),this.userService.updateUser(s).then(e=>{this.commonPopover.loaderDismiss(),this.commonPopover.toastPopOver("Profile updated successfully"),this.keystore.set("User",e)}).catch(e=>{this.commonPopover.loaderDismiss()})}))}doRefresh(e){this.userProf.fetchUserInfo(),setTimeout(()=>{e.target.complete()},1e3)}}var z=i.nb({encapsulation:0,styles:[[".checkbox[_ngcontent-%COMP%]{margin:18px 32px 18px 4px}input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border-radius:1px;box-sizing:border-box;position:relative;box-sizing:content-box;width:16px;height:16px;-webkit-transition:.3s linear;transition:all .3s linear;border:1px solid gray}input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:var(--ion-color-primary)}input[type=checkbox][_ngcontent-%COMP%]:focus{outline:0;box-shadow:none}"]],data:{}});function P(e){return i.Lb(0,[i.Hb(671088640,1,{userProf:0}),(e()(),i.pb(1,0,null,null,1,"app-common-header",[["isFullLogoActivate","true"],["isLoggedAsActivate","true"]],null,null,null,l.b,l.a)),i.ob(2,114688,null,0,r.a,[c.a,a.a,h.m,u.a],{isFullLogoActivate:[0,"isFullLogoActivate"],isLoggedAsActivate:[1,"isLoggedAsActivate"]},null),(e()(),i.pb(3,0,null,null,7,"ion-content",[],null,null,null,d.Q,d.i)),i.ob(4,49152,null,0,p.u,[i.h,i.k,i.x],null,null),(e()(),i.pb(5,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],(function(e,s,t){var i=!0;return"ionRefresh"===s&&(i=!1!==e.component.doRefresh(t)&&i),i}),d.eb,d.v)),i.ob(6,49152,null,0,p.ab,[i.h,i.k,i.x],null,null),(e()(),i.pb(7,0,null,0,1,"ion-refresher-content",[],null,null,null,d.db,d.w)),i.ob(8,49152,null,0,p.bb,[i.h,i.k,i.x],null,null),(e()(),i.pb(9,0,null,0,1,"app-user-profile",[],null,null,null,b.b,b.a)),i.ob(10,114688,[[1,4],["userProf",4]],0,f.a,[m.b,k.a,v.a,a.a,u.a,h.m,L.a],null,null)],(function(e,s){e(s,2,0,"true","true"),e(s,10,0)}),null)}function S(e){return i.Lb(0,[(e()(),i.pb(0,0,null,null,1,"app-profile",[],null,null,null,P,z)),i.ob(1,114688,null,0,I,[m.b,k.a,v.a,a.a,u.a],null,null)],(function(e,s){e(s,1,0)}),null)}var A=i.lb("app-profile",I,S,{},{},[]),B=t("SVse");class y{}var E=t("QhV3"),w=t("+G0P"),V=t("j1ZV");t.d(s,"ProfilePageModuleNgFactory",(function(){return F}));var F=i.mb(o,[],(function(e){return i.yb([i.zb(512,i.j,i.X,[[8,[n.a,A]],[3,i.j],i.v]),i.zb(4608,B.l,B.k,[i.s,[2,B.t]]),i.zb(4608,m.q,m.q,[]),i.zb(4608,p.b,p.b,[i.x,i.g]),i.zb(4608,p.Eb,p.Eb,[p.b,i.j,i.p]),i.zb(4608,p.Ib,p.Ib,[p.b,i.j,i.p]),i.zb(4608,m.b,m.b,[]),i.zb(5120,i.d,(function(e,s,t){return[p.Pb(e,s,t)]}),[p.Ob,B.c,i.x]),i.zb(1073742336,B.b,B.b,[]),i.zb(1073742336,m.p,m.p,[]),i.zb(1073742336,m.f,m.f,[]),i.zb(1073742336,p.Bb,p.Bb,[]),i.zb(1073742336,h.p,h.p,[[2,h.u],[2,h.m]]),i.zb(1073742336,y,y,[]),i.zb(1073742336,E.a,E.a,[]),i.zb(1073742336,m.m,m.m,[]),i.zb(1073742336,w.a,w.a,[]),i.zb(1073742336,V.a,V.a,[]),i.zb(1073742336,o,o,[]),i.zb(1024,h.k,(function(){return[[{path:"",component:I}]]}),[]),i.zb(256,p.Ob,void 0,[])])}))}}]);